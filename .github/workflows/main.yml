name: Sync commits to Notion

on: [push]

jobs:
  notion_hook_job:
    runs-on: ubuntu-latest

    # Notion toggles need an API version ≥ 2022-06-28
    env:
      NOTION_VERSION: "2022-06-28"

    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0          # keep history

      - name: Send commit info to Notion
        uses: alessandrobelli/NotionHook@1.1
        with:
          # ­-- secrets
          notion_secret:   ${{ secrets.NOTION_SECRET }}
          notion_database: ${{ secrets.NOTION_DATABASE }}

          # ­-- map GitHub data → your Notion columns
          commit_description: "Description"   # or "Title"
          commit_url:        "Url"
          commit_id:         "Id"             # or "Commit SHA"
          commit_project:    "Project"

          # ­-- turn OFF the file list so no token is required
          files_format: ""      # empty string = skip diff list
